<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Global Passive Analysis: 2026 Edition</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Syne:wght@700;800&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'DM Sans', sans-serif; background: #f8fafc; color: #0f172a; }
    .mono { font-family: 'DM Mono', monospace; }
    h1 { font-family: 'DM Sans', sans-serif; }
    input[type=range] {
      -webkit-appearance: none; appearance: none;
      width: 100%; height: 6px; border-radius: 9999px; outline: none; cursor: pointer;
    }
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none; width: 16px; height: 16px;
      border-radius: 50%; background: #3b82f6; cursor: pointer;
      border: 2px solid white; box-shadow: 0 1px 4px rgba(0,0,0,0.2);
    }
    .card { background: white; border-radius: 16px; box-shadow: 0 1px 4px rgba(0,0,0,0.07); border: 1px solid #e2e8f0; }
    .fund-card { transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s; cursor: default; }
    .fund-card:hover { transform: scale(1.02); box-shadow: 0 4px 24px rgba(59,130,246,0.12); }
    @media (max-width: 900px) {
      .main-grid { grid-template-columns: 1fr !important; }
    }
  </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useMemo } = React;

const FUND_DATA = [
  { name: 'Vanguard FTSE Global All Cap Index', ticker: 'VAFT', ocf: 0.0023, color: '#e11d48', type: 'OEIC', trackingError: [0.05, 0.10], coverage: 99 },
  { name: 'Vanguard FTSE All-World UCITS ETF',  ticker: 'VWRP', ocf: 0.0022, color: '#f59e0b', type: 'ETF',  trackingError: [0.03, 0.08], coverage: 90 },
  { name: 'iShares MSCI ACWI UCITS ETF',        ticker: 'SSAC', ocf: 0.0020, color: '#10b981', type: 'ETF',  trackingError: [0.18, 0.25], coverage: 85 },
  { name: 'SPDR MSCI ACWI IMI UCITS ETF',       ticker: 'SPYI', ocf: 0.0017, color: '#3b82f6', type: 'ETF',  trackingError: [0.15, 0.20], coverage: 99 },
  { name: 'Invesco FTSE All-World UCITS ETF',   ticker: 'FWRG', ocf: 0.0015, color: '#8b5cf6', type: 'ETF',  trackingError: [0.10, 0.15], coverage: 90 },
  { name: 'HSBC FTSE All-World Index',          ticker: 'HMWO', ocf: 0.0013, color: '#ec4899', type: 'OEIC', trackingError: [0.05, 0.15], coverage: 90 },
  { name: 'SPDR MSCI ACWI UCITS ETF',           ticker: 'ACWE', ocf: 0.0012, color: '#0ea5e9', type: 'ETF',  trackingError: [0.10, 0.15], coverage: 85 },
  { name: 'iShares Core MSCI World UCITS ETF',  ticker: 'SWDA', ocf: 0.0020, color: '#f97316', type: 'ETF',  trackingError: [0.03, 0.06], coverage: 85 },
  { name: 'Xtrackers MSCI Emerging Markets',    ticker: 'XMMS', ocf: 0.0018, color: '#a855f7', type: 'ETF',  trackingError: [0.18, 0.25], coverage: 85 },
  { name: 'Invesco EQQQ Nasdaq-100 GBP Hedged', ticker: 'EQGB', ocf: 0.0035, color: '#14b8a6', type: 'ETF',  trackingError: [0.05, 0.10], coverage: 100 },
  { name: 'Vanguard Global Agg Bond GBP Hedged',ticker: 'VAGS', ocf: 0.0010, color: '#84cc16', type: 'ETF',  trackingError: [0.08, 0.12], coverage: 90 },
  { name: 'Vanguard FTSE Developed World',      ticker: 'VHVG', ocf: 0.0012, color: '#f43f5e', type: 'ETF',  trackingError: [0.03, 0.05], coverage: 90 },
];

const fmt = v => new Intl.NumberFormat('en-GB', { style: 'currency', currency: 'GBP', maximumFractionDigits: 0 }).format(v);
const fmtK = v => v >= 1000000 ? `Â£${(v/1000000).toFixed(1)}m` : v >= 1000 ? `Â£${(v/1000).toFixed(0)}k` : `Â£${v}`;

// Inline SVG icon helper
const Icon = ({ d, size = 14, color = '#94a3b8' }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color}
    strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"
    style={{ display: 'inline-block', verticalAlign: 'middle', flexShrink: 0 }}>
    {[].concat(d).map((p, i) => <path key={i} d={p} />)}
  </svg>
);

const ICONS = {
  pound:    "M4 21h16M9 3v9a3 3 0 006 0V3M4 12h8",
  calendar: ["M8 2v4","M16 2v4","M3 10h18","M3 6a2 2 0 012-2h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V6z"],
  trend:    "M22 7l-8.5 8.5-5-5L2 17",
  filter:   ["M22 3H2l8 9.46V19l4 2v-8.54L22 3"],
  bar:      ["M3 3v18h18","M7 16v-5","M11 16V8","M15 16v-2","M19 16v-8"],
  globe:    ["M12 22A10 10 0 1012 2a10 10 0 000 20z","M2 12h20","M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"],
  zap:      "M13 2L3 14h9l-1 8 10-12h-9l1-8z",
  target:   ["M12 22A10 10 0 1012 2a10 10 0 000 20z","M12 18A6 6 0 1012 6a6 6 0 000 12z","M12 14A2 2 0 1012 10a2 2 0 000 4z"],
  star:     "M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",
  check:    ["M22 11.08V12a10 10 0 11-5.93-9.14","M22 4L12 14.01l-3-3"],
};

function useCalculations(investment, years, annualGrowth, minScore) {
  return useMemo(() => {
    const g = annualGrowth / 100;
    const metrics = FUND_DATA.map(f => ({ ocf: f.ocf, coverage: f.coverage, error: (f.trackingError[0]+f.trackingError[1])/2 }));
    const range = {
      ocf:      { min: Math.min(...metrics.map(m=>m.ocf)),      max: Math.max(...metrics.map(m=>m.ocf)) },
      coverage: { min: Math.min(...metrics.map(m=>m.coverage)), max: Math.max(...metrics.map(m=>m.coverage)) },
      error:    { min: Math.min(...metrics.map(m=>m.error)),    max: Math.max(...metrics.map(m=>m.error)) },
    };
    const getScore = (val, min, max, inverse=false) => {
      if (max===min) return 10;
      return Math.round((inverse ? 1+9*(max-val)/(max-min) : 1+9*(val-min)/(max-min))*10)/10;
    };
    const allFunds = FUND_DATA.map(fund => {
      const avgErr = (fund.trackingError[0]+fund.trackingError[1])/2;
      const scores = {
        coverage: getScore(fund.coverage, range.coverage.min, range.coverage.max),
        ocf:      getScore(fund.ocf, range.ocf.min, range.ocf.max, true),
        error:    getScore(avgErr, range.error.min, range.error.max, true),
      };
      return { ...fund, scores, totalScore: parseFloat((scores.coverage+scores.ocf+scores.error).toFixed(1)) };
    });
    const visible = allFunds.filter(f => f.totalScore >= minScore);

    // Build series: fee drag per year
    const series = visible.map(fund => {
      const pts = [];
      for (let i=0; i<=years; i++) {
        const gross = investment * Math.pow(1+g, i);
        let bal = investment;
        for (let y=0; y<i; y++) bal = bal*(1+g)*(1-fund.ocf);
        pts.push(Math.round(gross - bal));
      }
      return { ...fund, pts };
    });
    const maxFee = Math.max(1, ...series.flatMap(s=>s.pts));

    const results = visible.map(fund => {
      const gross = Math.round(investment * Math.pow(1+g, years));
      let bal = investment;
      for (let y=0; y<years; y++) bal = bal*(1+g)*(1-fund.ocf);
      const totalFees = Math.round(gross - bal);
      return { ...fund, finalBalance: Math.round(bal), totalFees, percentageLost: gross>0 ? ((totalFees/gross)*100).toFixed(1) : '0' };
    }).sort((a,b) => a.totalFees - b.totalFees);

    return { series, maxFee, results, visible };
  }, [investment, years, annualGrowth, minScore]);
}

// Pure SVG area chart â€” no Recharts needed
function AreaChart({ series, years, maxFee, hovered, setHovered }) {
  const W=880, H=340, PL=64, PR=16, PT=10, PB=36;
  const cw=W-PL-PR, ch=H-PT-PB;
  const xp = i => PL + (i/years)*cw;
  const yp = v => PT + ch - (v/maxFee)*ch;
  const YTICKS = 5;

  const [tooltip, setTooltip] = useState(null);

  if (series.length === 0) return (
    <div style={{height:320,display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',background:'#f8fafc',borderRadius:12,border:'2px dashed #e2e8f0'}}>
      <Icon d={ICONS.filter} size={36} color="#cbd5e1" />
      <p style={{color:'#94a3b8',fontWeight:500,marginTop:10}}>No funds meet the current filter.</p>
      <p style={{color:'#cbd5e1',fontSize:12,marginTop:4}}>Lower the Min Score slider to show funds.</p>
    </div>
  );

  const handleMouseMove = (e) => {
    const rect = e.currentTarget.getBoundingClientRect();
    const svgX = (e.clientX - rect.left) * (W / rect.width);
    const rawYear = ((svgX - PL) / cw) * years;
    const yr = Math.max(0, Math.min(years, Math.round(rawYear)));
    setTooltip({ yr, x: xp(yr), y: e.clientY - rect.top });
  };

  return (
    <div>
      <svg
        viewBox={`0 0 ${W} ${H}`}
        style={{width:'100%',height:'auto',display:'block',cursor:'crosshair'}}
        onMouseMove={handleMouseMove}
        onMouseLeave={() => setTooltip(null)}
      >
        <defs>
          {series.map(s => (
            <linearGradient key={s.ticker} id={`grad-${s.ticker}`} x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stopColor={s.color} stopOpacity={hovered && hovered!==s.ticker ? 0.02 : 0.15}/>
              <stop offset="100%" stopColor={s.color} stopOpacity={0}/>
            </linearGradient>
          ))}
        </defs>

        {/* Y grid + labels */}
        {Array.from({length:YTICKS+1},(_,i)=>i).map(i => {
          const y = PT + (i/YTICKS)*ch;
          const v = maxFee*(1 - i/YTICKS);
          return (
            <g key={i}>
              <line x1={PL} y1={y} x2={W-PR} y2={y} stroke="#f1f5f9" strokeWidth="1"/>
              <text x={PL-6} y={y+4} textAnchor="end" fontSize="10" fill="#94a3b8" fontFamily="DM Mono,monospace">{fmtK(v)}</text>
            </g>
          );
        })}

        {/* X labels */}
        {Array.from({length:Math.min(years+1,11)},(_,i) => Math.round(i*years/Math.min(years,10))).map(yr => (
          <text key={yr} x={xp(yr)} y={H-6} textAnchor="middle" fontSize="10" fill="#94a3b8" fontFamily="DM Mono,monospace">{yr}</text>
        ))}

        {/* Area fills */}
        {series.map(s => {
          const d = `M ${xp(0)} ${yp(s.pts[0])} ` +
            s.pts.slice(1).map((v,i)=>`L ${xp(i+1)} ${yp(v)}`).join(' ') +
            ` L ${xp(years)} ${yp(0)} L ${xp(0)} ${yp(0)} Z`;
          return <path key={s.ticker} d={d} fill={`url(#grad-${s.ticker})`} />;
        })}

        {/* Lines */}
        {series.map(s => {
          const d = `M ${xp(0)} ${yp(s.pts[0])} ` + s.pts.slice(1).map((v,i)=>`L ${xp(i+1)} ${yp(v)}`).join(' ');
          const isHov = hovered===s.ticker;
          const faded = hovered && !isHov;
          return (
            <path key={s.ticker} d={d} fill="none" stroke={s.color}
              strokeWidth={isHov ? 3.5 : faded ? 0.5 : 1.8}
              strokeOpacity={faded ? 0.12 : 1}
              style={{transition:'stroke-width 0.2s,stroke-opacity 0.2s'}}
            />
          );
        })}

        {/* Tooltip vertical line */}
        {tooltip && (
          <line x1={tooltip.x} y1={PT} x2={tooltip.x} y2={PT+ch} stroke="#cbd5e1" strokeWidth="1" strokeDasharray="4 3"/>
        )}
      </svg>

      {/* Tooltip box */}
      {tooltip && (
        <div style={{background:'white',border:'1px solid #e2e8f0',borderRadius:10,padding:'10px 14px',boxShadow:'0 8px 24px rgba(0,0,0,0.1)',fontSize:12,minWidth:180,marginTop:8,display:'inline-block'}}>
          <p style={{fontWeight:700,color:'#475569',marginBottom:6}}>Year {tooltip.yr}</p>
          {series.map(s => (
            <div key={s.ticker} style={{display:'flex',justifyContent:'space-between',gap:16,marginBottom:3}}>
              <span style={{display:'flex',alignItems:'center',gap:4}}>
                <span style={{width:8,height:8,borderRadius:'50%',background:s.color,display:'inline-block'}}/>
                <span style={{fontWeight:600,color:'#334155'}}>{s.ticker}</span>
              </span>
              <span className="mono" style={{color:'#e11d48',fontWeight:600}}>{fmt(s.pts[tooltip.yr]||0)}</span>
            </div>
          ))}
        </div>
      )}

      {/* Legend */}
      <div style={{display:'flex',flexWrap:'wrap',gap:'10px 18px',marginTop:tooltip?8:14,paddingLeft:4}}>
        {series.map(s => (
          <div key={s.ticker}
            style={{display:'flex',alignItems:'center',gap:6,cursor:'default',
              opacity: hovered && hovered!==s.ticker ? 0.2 : 1,
              transition:'opacity 0.2s'}}
            onMouseEnter={()=>setHovered(s.ticker)}
            onMouseLeave={()=>setHovered(null)}>
            <div style={{width:10,height:10,borderRadius:'50%',background:s.color}}/>
            <span style={{fontSize:11,fontWeight:700,color:'#334155'}}>{s.ticker}</span>
            <span style={{fontSize:10,color:'#94a3b8'}}>({(s.ocf*100).toFixed(2)}%)</span>
          </div>
        ))}
      </div>
    </div>
  );
}

function ScoreRow({ icon, label, val }) {
  return (
    <div style={{display:'flex',alignItems:'center',marginBottom:8}}>
      <div style={{display:'flex',alignItems:'center',gap:4,width:70,fontSize:9,fontWeight:700,color:'#64748b',textTransform:'uppercase',letterSpacing:'0.06em'}}>
        <Icon d={ICONS[icon]} size={10} color="#94a3b8"/> {label}
      </div>
      <div style={{flex:1,height:4,background:'#e2e8f0',borderRadius:999,overflow:'hidden',marginLeft:8}}>
        <div style={{width:`${val*10}%`,height:'100%',background:'#64748b',borderRadius:999}}/>
      </div>
      <span className="mono" style={{fontSize:10,fontWeight:700,color:'#334155',width:24,textAlign:'right',marginLeft:8}}>{val}</span>
    </div>
  );
}

function FundCard({ result, hovered, setHovered }) {
  const isHov = hovered === result.ticker;
  return (
    <div className="fund-card card"
      style={{padding:20,display:'flex',flexDirection:'column',
        border: isHov ? '1.5px solid #93c5fd' : '1px solid #e2e8f0',
        boxShadow: isHov ? '0 4px 24px rgba(59,130,246,0.12)' : undefined}}
      onMouseEnter={()=>setHovered(result.ticker)}
      onMouseLeave={()=>setHovered(null)}>

      {/* Header */}
      <div style={{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:14}}>
        <div style={{display:'flex',gap:8,maxWidth:'70%'}}>
          <div style={{width:4,borderRadius:999,background:result.color,flexShrink:0,alignSelf:'stretch'}}/>
          <div>
            <h4 style={{fontWeight:700,fontSize:13,color:'#0f172a',lineHeight:1.3,marginBottom:2}}>{result.name}</h4>
            <p className="mono" style={{fontSize:10,fontWeight:700,color:'#94a3b8',textTransform:'uppercase',letterSpacing:'0.1em'}}>{result.ticker} Â· {result.type}</p>
          </div>
        </div>
        <div style={{fontSize:10,fontWeight:700,color:'#3b82f6',background:'#eff6ff',padding:'3px 8px',borderRadius:999,whiteSpace:'nowrap'}}>
          {result.coverage}% cov
        </div>
      </div>

      {/* Fee impact */}
      <div style={{marginBottom:14}}>
        <p style={{fontSize:10,color:'#94a3b8',fontWeight:700,textTransform:'uppercase',letterSpacing:'0.08em',marginBottom:4}}>Fee Drag</p>
        <p style={{fontSize:22,fontWeight:700,color:'#e11d48',lineHeight:1.1,fontFamily:'DM Mono,monospace'}}>{fmt(result.totalFees)}</p>
        <p style={{fontSize:10,color:'#94a3b8',marginTop:3}}>{result.percentageLost}% of gross growth lost</p>
      </div>

      {/* Scores */}
      <div style={{background:'#f8fafc',padding:12,borderRadius:10,border:'1px solid #f1f5f9',flex:1}}>
        <div style={{display:'flex',alignItems:'center',gap:4,marginBottom:10,paddingBottom:8,borderBottom:'1px solid #e2e8f0'}}>
          <Icon d={ICONS.star} size={12} color="#f59e0b"/>
          <span style={{fontSize:9,fontWeight:800,textTransform:'uppercase',letterSpacing:'0.12em',color:'#64748b'}}>Score Summary</span>
        </div>
        <ScoreRow icon="globe"  label="Coverage" val={result.scores.coverage}/>
        <ScoreRow icon="zap"    label="Low Fees"  val={result.scores.ocf}/>
        <ScoreRow icon="target" label="Precision" val={result.scores.error}/>

        {/* Final score */}
        <div style={{marginTop:10,paddingTop:10,borderTop:'1px solid #d1fae5',background:'rgba(236,253,245,0.6)',margin:'10px -12px -12px',padding:'10px 12px 12px',borderRadius:'0 0 10px 10px'}}>
          <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:6}}>
            <div style={{display:'flex',alignItems:'center',gap:4,fontSize:9,fontWeight:800,color:'#059669',textTransform:'uppercase',letterSpacing:'0.1em'}}>
              <Icon d={ICONS.check} size={12} color="#059669"/> Final Score
            </div>
            <span className="mono" style={{fontSize:12,fontWeight:800,color:'#059669'}}>{result.totalScore} / 30</span>
          </div>
          <div style={{height:6,background:'#d1fae5',borderRadius:999,overflow:'hidden'}}>
            <div style={{width:`${(result.totalScore/30)*100}%`,height:'100%',background:'#10b981',borderRadius:999,boxShadow:'0 0 6px rgba(16,185,129,0.4)'}}/>
          </div>
        </div>
      </div>

      {/* Footer */}
      <div style={{marginTop:14,paddingTop:12,borderTop:'1px solid #f1f5f9',display:'flex',justifyContent:'space-between',alignItems:'flex-end'}}>
        <div>
          <p style={{fontSize:10,color:'#94a3b8',fontWeight:700,textTransform:'uppercase',letterSpacing:'0.08em'}}>Final Balance</p>
          <p className="mono" style={{fontSize:16,fontWeight:700,color:'#0f172a'}}>{fmt(result.finalBalance)}</p>
        </div>
        <div style={{textAlign:'right'}}>
          <p style={{fontSize:9,color:'#94a3b8',fontWeight:700,textTransform:'uppercase',letterSpacing:'0.08em'}}>OCF p.a.</p>
          <p className="mono" style={{fontSize:11,fontWeight:700,color:'#475569'}}>{(result.ocf*100).toFixed(2)}%</p>
        </div>
      </div>
    </div>
  );
}

function SliderControl({ iconKey, label, value, display, min, max, step, onChange, green }) {
  const pct = ((value-min)/(max-min)*100).toFixed(1);
  const trackColor = green
    ? `linear-gradient(to right,#10b981 ${pct}%,#d1fae5 ${pct}%)`
    : `linear-gradient(to right,#3b82f6 ${pct}%,#e2e8f0 ${pct}%)`;
  return (
    <label style={{display:'block'}}>
      <div style={{display:'flex',justifyContent:'space-between',marginBottom:8,alignItems:'center'}}>
        <span style={{display:'flex',alignItems:'center',gap:5,fontSize:11,fontWeight:700,
          color: green ? '#059669' : '#475569',textTransform:'uppercase',letterSpacing:'0.08em'}}>
          <Icon d={ICONS[iconKey]} size={13} color={green?'#059669':'#94a3b8'}/> {label}
        </span>
        <span className="mono" style={{fontSize:13,fontWeight:700,color:green?'#059669':'#3b82f6'}}>{display}</span>
      </div>
      <input type="range" min={min} max={max} step={step} value={value}
        onChange={e=>onChange(Number(e.target.value))}
        style={{background:trackColor}}/>
    </label>
  );
}

function App() {
  const [investment, setInvestment] = useState(100000);
  const [years, setYears]           = useState(25);
  const [growth, setGrowth]         = useState(7);
  const [minScore, setMinScore]     = useState(0);
  const [hovered, setHovered]       = useState(null);

  const { series, maxFee, results, visible } = useCalculations(investment, years, growth, minScore);

  return (
    <div style={{minHeight:'100vh',background:'#f8fafc',padding:'32px 20px'}}>
      <div style={{maxWidth:1300,margin:'0 auto'}}>

        <header style={{marginBottom:32}}>
          <h1 style={{fontSize:28,fontWeight:800,color:'#0f172a',marginBottom:4,letterSpacing:'-0.02em'}}>
            Global Passive Analysis: 2026 Edition
          </h1>
          <p style={{color:'#94a3b8',fontSize:13,marginBottom:16}}>
            Evaluating Global Equity Coverage vs. Compounded OCF Fees
          </p>
          <div style={{background:'#f0f9ff',border:'1px solid #bae6fd',borderRadius:12,padding:'12px 16px',maxWidth:780,display:'flex',gap:12,alignItems:'flex-start'}}>
            <span style={{fontSize:16,lineHeight:'1.6'}}>ðŸ’¡</span>
            <p style={{fontSize:13,color:'#0c4a6e',lineHeight:1.65}}>
              Set your <strong>investment</strong>, <strong>time horizon</strong>, and <strong>expected growth rate</strong> on the left â€” the chart and cards update instantly. The chart shows how much each fund's annual fee eats into your returns over time. Use the <strong>Min Score filter</strong> to strip out lower-rated funds and focus on the best.
            </p>
          </div>
        </header>

        <div className="main-grid" style={{display:'grid',gridTemplateColumns:'270px 1fr',gap:24,alignItems:'start'}}>

          {/* â”€â”€ Controls Panel â”€â”€ */}
          <div className="card" style={{padding:24}}>
            <h3 style={{fontSize:11,fontWeight:800,color:'#94a3b8',textTransform:'uppercase',
              letterSpacing:'0.15em',textAlign:'center',marginBottom:24}}>Parameters</h3>
            <div style={{display:'flex',flexDirection:'column',gap:26}}>
              <SliderControl iconKey="pound"    label="Investment" value={investment} display={fmt(investment)}      min={1000}  max={2000000} step={5000} onChange={setInvestment}/>
              <SliderControl iconKey="calendar" label="Years"      value={years}      display={`${years} yrs`}      min={1}     max={50}      step={1}    onChange={setYears}/>
              <SliderControl iconKey="trend"    label="Growth"     value={growth}     display={`${growth}% p.a.`}   min={0}     max={15}      step={0.5}  onChange={setGrowth}/>
              <div style={{paddingTop:20,borderTop:'1px solid #f1f5f9'}}>
                <SliderControl iconKey="filter" label="Min Score" value={minScore} display={`${minScore} / 30`} min={0} max={30} step={1} onChange={setMinScore} green/>
                <p style={{fontSize:10,color:'#94a3b8',marginTop:8,fontStyle:'italic',textAlign:'center',lineHeight:1.5}}>
                  Hides funds below this combined score from the analysis.
                </p>
              </div>
            </div>
          </div>

          {/* â”€â”€ Right Column â”€â”€ */}
          <div style={{display:'flex',flexDirection:'column',gap:24}}>

            {/* Chart card */}
            <div className="card" style={{padding:24}}>
              <div style={{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:20}}>
                <div>
                  <h3 style={{fontSize:16,fontWeight:700,display:'flex',alignItems:'center',gap:8,color:'#0f172a'}}>
                    <Icon d={ICONS.bar} size={18} color="#f43f5e"/> The Cost of Fees
                  </h3>
                  <p style={{fontSize:11,color:'#94a3b8',marginTop:4}}>
                    {visible.length > 0
                      ? `Compounded OCF drag over ${years} years for ${visible.length} qualifying fund${visible.length!==1?'s':''}.`
                      : 'No funds match the current score filter.'}
                  </p>
                </div>
                <div style={{padding:'4px 12px',background:'#eff6ff',color:'#3b82f6',
                  borderRadius:999,fontSize:10,fontWeight:700,textTransform:'uppercase',whiteSpace:'nowrap'}}>
                  {visible.length} Active
                </div>
              </div>
              <AreaChart series={series} years={years} maxFee={maxFee} hovered={hovered} setHovered={setHovered}/>
            </div>

            {/* Fund cards grid */}
            <div style={{display:'grid',gridTemplateColumns:'repeat(auto-fill,minmax(230px,1fr))',gap:16}}>
              {results.map(r => (
                <FundCard key={r.ticker} result={r} hovered={hovered} setHovered={setHovered}/>
              ))}
              {results.length === 0 && (
                <div style={{gridColumn:'1/-1',textAlign:'center',padding:'40px 0',color:'#94a3b8'}}>
                  <Icon d={ICONS.filter} size={32} color="#cbd5e1"/>
                  <p style={{marginTop:10,fontWeight:500}}>No funds match the current filter.</p>
                  <button onClick={()=>window.dispatchEvent(new CustomEvent('resetScore'))}
                    style={{marginTop:8,color:'#3b82f6',fontSize:12,fontWeight:700,background:'none',border:'none',cursor:'pointer',textDecoration:'underline'}}>
                    Reset filter
                  </button>
                </div>
              )}
            </div>

          </div>
        </div>
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>
